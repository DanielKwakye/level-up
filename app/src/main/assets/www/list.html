<template>
<div class="page" data-name="list">

	<div class="navbar no-shadow">
		<div class="navbar-bg white-bg"></div>
		<div class="navbar-inner">
			<div class="left">
				<a class="link icon-only back">
					<img src="img/back.png" style="width:calc(15pt / var(--ratio))">
				</a>
			</div>
			<div class="title normal-title">
				{{#js_if 'this.type == "grocery"'}}Grocery{{/js_if}}
				{{#js_if 'this.type == "fnb"'}}F&amp;B{{/js_if}}
				{{#js_if 'this.type == "cars"'}}Cars{{/js_if}}
				{{#js_if 'this.type == "gadget"'}}Gadget{{/js_if}}
				{{#js_if 'this.type == "financial"'}}Financial Planning{{/js_if}}
			</div>
			<div class="right">
				<a class="link icon-only" href="/filter/">
					<img src="img/filter.png" style="width:calc(23pt / var(--ratio))">
				</a>
			</div>
		</div>
	</div>
	
	<div class="page-content sp-content">
		

		<img class="custom-banner" src="img/grocery.png" />
		<div class="toolbar tabbar tabbar-scrollable toolbar-top custom-tabbar" style="top:0">
			<div class="toolbar-inner">
				<a href="#tab-all" class="tab-link tab-link-active">All</a>
				<a href="#tab-popular" class="tab-link tab-link-active">Popular</a>
				{{#js_if 'this.type == "grocery"'}}
				<a href="#tab-near" class="tab-link tab-link-active">Convenience Store</a>
				{{/js_if}}
				{{#js_if 'this.type == "fnb"'}}
				<a href="#tab-near" class="tab-link tab-link-active">Near Me</a>
				{{/js_if}}
				{{#js_if 'this.type == "financial"'}}
				<a href="#tab-near" class="tab-link tab-link-active">Motor Insurance</a>
				{{/js_if}}
				<!--a href="#tab-near" class="tab-link tab-link-active">Near Me</a-->
			</div>
		</div>
		
		<div class="tabs-swipeable-wrap" style="height:calc(100% - var(--f7-toolbar-height))">
			<div class="tabs">
				
				<div id="tab-all" class="tab tab-active">
					<div class="tab-page">
						<div class="list media-list no-hairline-top general-list no-margin-top no-chevron">
							<ul>
								{{#js_if 'this.type == "grocery"'}}
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 1)">
										<div class="item-media">
											<img src="img/99.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">99 Speedmart</div>
											</div>
											<div class="item-text">Instant RM15 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect &amp; use VShare Points</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 2)">
										<div class="item-media">
											<img src="img/kk.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">KK SUPER MART</div>
											</div>
											<div class="item-text">Instant RM20 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect &amp; use VShare Points</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 3)">
										<div class="item-media">
											<img src="img/fmart.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Family Mart</div>
											</div>
											<div class="item-text">Instant RM10 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect VShare Points</div>
										</div>
									</a>
								</li>
								{{/js_if}}
								
								{{#js_if 'this.type == "fnb"'}}
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 4)">
										<div class="item-media">
											<img src="img/kfc.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">KFC</div>
											</div>
											<div class="item-text">Instant RM10 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect &amp; use VShare Points</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 5)">
										<div class="item-media">
											<img src="img/tealive.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Tealive</div>
											</div>
											<div class="item-text">Instant RM5 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect &amp; use VShare Points</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 6)">
										<div class="item-media">
											<img src="img/chicken.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">The Chicken Rice Shop</div>
											</div>
											<div class="item-text">Instant RM20 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect VShare Points</div>
										</div>
									</a>
								</li>
								{{/js_if}}
								
								{{#js_if 'this.type == "cars"'}}
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 7)">
										<div class="item-media">
											<img src="img/proton.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Proton</div>
											</div>
											<div class="item-text">Collect &amp; use VShare Points</div>
											<!--div class="item-subtitle">Limited Redemption</div-->
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 8)">
										<div class="item-media">
											<img src="img/perodua.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Perodua</div>
											</div>
											<div class="item-text">Instant RM10 Off when<br>pay with VShare Points </div>
											<!--div class="item-subtitle">Limited Redemption</div-->
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 9)">
										<div class="item-media">
											<img src="img/honda.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Honda</div>
											</div>
											<div class="item-text">Instant RM10 Off when<br>pay with VShare Points </div>
											<!--div class="item-subtitle">Limited Redemption</div-->
										</div>
									</a>
								</li>
								{{/js_if}}
								
								{{#js_if 'this.type == "financial"'}}
								<li>
									<a class="item-content item-link" @click="navigate('/middle/', 10)">
										<div class="item-media">
											<img src="img/allianz.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Allianz</div>
											</div>
											<div class="item-text">Claims : Market/AGREED </div>
											<div class="item-subtitle">FREE TOWING</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/middle/', 11)">
										<div class="item-media">
											<img src="img/etiqa.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Etiqa</div>
											</div>
											<div class="item-text">Claims : Market </div>
											<div class="item-subtitle">FREE TOWING</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/middle/', 12)">
										<div class="item-media">
											<img src="img/rhb.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">RHB</div>
											</div>
											<div class="item-text">Claims : AGREED </div>
											<div class="item-subtitle">FREE TOWING</div>
										</div>
									</a>
								</li>
								{{/js_if}}
								
								{{#js_if 'this.type == "gadget"'}}
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 13)">
										<div class="item-media">
											<img src="img/ninjaz.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Ninjaz</div>
											</div>
											<div class="item-text">Instant RM10 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect &amp; use VShare Points</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 14)">
										<div class="item-media">
											<img src="img/senheng.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Senheng Electric</div>
											</div>
											<div class="item-text">Instant RM80 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect &amp; use VShare Points</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 15)">
										<div class="item-media">
											<img src="img/huawei.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Huawei Experience Shop</div>
											</div>
											<div class="item-text">Instant RM100 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect &amp; use VShare Points</div>
										</div>
									</a>
								</li>
								{{/js_if}}
								
								
							</ul>
						</div>
					</div>
				</div>
				<div id="tab-popular" class="tab">
					<div class="tab-page">
						<div class="list media-list no-hairline-top general-list no-margin-top">
							
						</div>
					</div>
				</div>
				<div id="tab-near" class="tab">
					<div class="tab-page">
						<div class="list media-list no-hairline-top general-list no-margin-top">
							<ul>
								{{#js_if 'this.type == "grocery"'}}
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 1)">
										<div class="item-media">
											<img src="img/99.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">99 Speedmart</div>
											</div>
											<div class="item-text">Instant RM15 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect &amp; use VShare Points</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 2)">
										<div class="item-media">
											<img src="img/kk.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">KK SUPER MART</div>
											</div>
											<div class="item-text">Instant RM20 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect &amp; use VShare Points</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/details/', 3)">
										<div class="item-media">
											<img src="img/fmart.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Family Mart</div>
											</div>
											<div class="item-text">Instant RM10 Off when<br>pay with VShare Points </div>
											<div class="item-subtitle">Collect VShare Points</div>
										</div>
									</a>
								</li>
								{{/js_if}}
								{{#js_if 'this.type == "financial"'}}
								<li>
									<a class="item-content item-link" @click="navigate('/middle/', 10)">
										<div class="item-media">
											<img src="img/allianz.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Allianz</div>
											</div>
											<div class="item-text">Claims : Market/AGREED </div>
											<div class="item-subtitle">FREE TOWING</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/middle/', 11)">
										<div class="item-media">
											<img src="img/etiqa.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">Etiqa</div>
											</div>
											<div class="item-text">Claims : Market </div>
											<div class="item-subtitle">FREE TOWING</div>
										</div>
									</a>
								</li>
								<li>
									<a class="item-content item-link" @click="navigate('/middle/', 12)">
										<div class="item-media">
											<img src="img/rhb.png">
										</div>
										<div class="item-inner">
											<div class="item-title-row">
												<div class="item-title">RHB</div>
											</div>
											<div class="item-text">Claims : AGREED </div>
											<div class="item-subtitle">FREE TOWING</div>
										</div>
									</a>
								</li>
								{{/js_if}}
							</ul>
						</div>
					</div>
				</div>
				
			</div>
		</div>
	
	</div>
	
</div>
</template>

<style>

.custom-tabbar a.tab-link {
	text-transform:unset!important;
	color:rgb(65,64,66);
	font-family:'Lato';
	font-weight:500;
	font-size:calc(20pt / var(--ratio));
	line-height:calc(24pt / var(--ratio));
	margin:0 calc(10pt / var(--ratio));
	padding:0 calc(15pt / var(--ratio))!important;
}
.custom-tabbar a.tab-link:first-child {
	margin-left:calc(30pt / var(--ratio));
}
.custom-tabbar a.tab-link.tab-link-active {
	font-weight:700;
}
.custom-tabbar .tab-link-highlight {
	background-color:rgb(65,64,66)!important;
	border-radius:2pt;
}
.custom-tabbar.toolbar-top:before {
	height:calc(1pt / var(--ratio));
	background:rgb(230,231,232);
	top:calc(100% - 2pt / var(--ratio));
}
.custom-banner {
	width:100%;
	max-width:100%;
}
.tab-page {
	height:100%;
	overflow:visible;
}
.general-list {
	font-family:'Lato';
	color:#000;
	padding:0 calc(30pt / var(--ratio));
}
.general-list .item-media {
	align-self:center;
}
.general-list .item-media>img {
	width:calc(105pt / var(--ratio));
}
.general-list .item-title {
	font-weight:500;
	font-size:calc(16pt / var(--ratio));
	line-height:calc(19pt / var(--ratio));
}
.general-list .item-text {
	font-weight:700;
	font-size:calc(18pt / var(--ratio));
	line-height:calc(21.6pt / var(--ratio));
	text-align:left;
	color:#000;
	margin-top:0;
	padding:calc(20pt / var(--ratio)) 0 calc(15pt / var(--ratio));
}
.general-list .item-subtitle {
	font-weight:700;
	font-size:calc(18pt / var(--ratio));
	line-height:calc(21.6pt / var(--ratio));
	color:var(--f7-theme-color4);
}
.general-list.list .item-inner {
	padding:calc(30pt / var(--ratio)) 0;
	margin-left:calc(30pt / var(--ratio));
}
.general-list.list .item-inner:after {
	height:calc(1pt / var(--ratio));
	background:rgb(230,231,232);
	left:calc(0pt - 135pt / var(--ratio) - 16px);
	width:calc(100% + 135pt / var(--ratio) + 16px);
}
.general-list.list ul:after {
	height:calc(1pt / var(--ratio));
	background:rgb(230,231,232);
}

</style>

<script>

	return {
		data() {
			list = this;
			return {
				'type': dashboard.type,
				'selected_id': -1
			};
			
		},
		methods: {
		
			navigate: function(url, id) {
				list.selected_id = id;
				router.navigate(url);
			}
		
		},
		on: {
      pageInit: function () {
				
				var img = $('.sp-content .custom-banner')[0];
				var h = 0;
				img.onload = function () {
					h = $(this).height()+6;
				};
			
				$('.sp-content').on('scroll', function() {
					$('.tab-page').css('overflow', $(this).scrollTop() < h ? 'visible':'auto');
				});
				
				$('.custom-tabbar .tab-link-active').each(function(i) {
					$(this).css('min-width', $(this).innerWidth()+'px');
					if (i>0) $(this).removeClass('tab-link-active');
				});
			}
		}
	};

</script>